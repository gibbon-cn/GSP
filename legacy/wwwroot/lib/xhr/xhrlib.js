/*!
 * SAP XHR Library v1.2.0
 * (c) Copyright 2013-2016 SAP SE or an SAP affiliate company.
*/
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.xhrlib=e()}}(function(){return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";function r(e){this.handlers=new i(["windowfailed"]),this.FrameProxyClass=e||s}var i=e("./EventHandlers.js"),o=e("./events.js"),s=e("./FrameProxy.js");t.exports=r,r.prototype.create=function(){return this.frameProxy=new this.FrameProxyClass(this),this.frameProxy},r.prototype.destroy=function(){this.frameProxy&&(this.frameProxy.close(),this.frameProxy=void 0)},r.prototype.show=function(){},r.prototype.addEventListener=function(e,t){this.handlers.add(e,t)},r.prototype.removeEventListener=function(e,t){this.handlers.remove(e,t)},r.prototype.dispatchWindowFailedEvent=function(){var e=this,t=o.createEvent("windowfailed");setTimeout(function(){e.handlers.dispatch(t)},0)}},{"./EventHandlers.js":5,"./FrameProxy.js":7,"./events.js":14}],2:[function(e,t,n){"use strict";function r(e,t,n,r,i,o){this.filters=[],this.xhr=e,this.method=t,this.url=n,this.async=!!r,void 0!==i&&(this.username=i),void 0!==o&&(this.password=o)}var i;t.exports=r,i=r.prototype,i._process=function(e){var t,n,r,i;for(t=this.filters,i=t.length,r=0;r<i;++r)n=t[r],"function"==typeof n[e]&&n[e](this)},i.aborting=function(){this._process("aborting")},i.aborted=function(){this._process("aborted")},i.opening=function(){this._process("opening")},i.opened=function(){this._process("opened")},i.sending=function(){this._process("sending")},i.sent=function(){this._process("sent")},i.reopening=function(){this._process("reopening")},i.catch=function(e){var t,n,r;for(t=this.filters,r=t.length,n=0;n<r;++n)if("function"==typeof t[n].catch)try{t[n].catch(e,this),e=null;break}catch(t){e=t}if(e)throw e}},{}],3:[function(e,t,n){"use strict";function r(){this._filterFactories=[],this.ignore=new h}function i(e){var t;return t=typeof e,"function"===t||"object"===t&&null!==e&&"function"==typeof e.addFilter}function o(e,t){"function"==typeof e?e(t):e.addFilter(t)}var s,a=e("./Channel.js"),h=e("./IgnoreList.js");t.exports=r,s=r.prototype,s.reset=function(){this._filterFactories=[],this.ignore=new h},s.addFilterFactory=function(e){var t,n,r,o;if(!i(e))throw new TypeError("addFilterFactory expects a FilterFactory or a function parameter");for(n=this._filterFactories,t=!0,o=n.length,r=0;r<o;++r)if(n[r]===e){t=!1;break}t&&this._filterFactories.push(e)},s.removeFilterFactory=function(e){var t,n,r;for(t=this._filterFactories,r=t.length,n=0;n<r;++n)if(t[n]===e){t.splice(n,1);break}},s.getFilterFactories=function(){return this._filterFactories.slice()},s.create=function(e,t,n,r,i,s){var h,c,u,d;if(h=new a(e,t,n,r,i,s),!this.ignore.ignored(n))for(c=this._filterFactories,d=c.length,u=0;u<d;++u)o(c[u],h);return h}},{"./Channel.js":2,"./IgnoreList.js":8}],4:[function(e,t,n){"use strict";function r(){this.frameCounter=0,this.handlers=new s([a])}var i,o=e("./events.js"),s=e("./EventHandlers.js"),a="authenticationrequired";t.exports=r,i=r.prototype,i.addEventListener=function(e,t){this.handlers.add(e,t)},i.removeEventListener=function(e,t){this.handlers.remove(e,t)},i.dispatchAuthenticationRequired=function(){var e=this,t=o.createEvent(a);setTimeout(function(){e.handlers.dispatch(t)},0)},i.create=function(){var e,t,n=this;return this.destroy(),this.handlers.hasSubscribers(a)?(this.dispatchAuthenticationRequired(),null):(this.frameCounter+=1,e="xhrLogonFrame"+this.frameCounter,this.frame=document.createElement("iframe"),this.frame.id=e,this.frame.style.display="none","complete"===document.readyState?document.body.appendChild(this.frame):(t=function(){"complete"===document.readyState&&(document.body.appendChild(n.frame),o.removeEventListener(document,"readystatechange",t))},o.addEventListener(document,"readystatechange",t)),this.frame)},i.destroy=function(){this.frame&&(document.body.removeChild(this.frame),this.frame=null)},i.show=function(e){var t=this.frame;!e&&this.handlers.hasSubscribers(a)?this.dispatchAuthenticationRequired():t&&(t.style.display="block",t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.zIndex=99999,t.style.border=0,t.style.background="white")}},{"./EventHandlers.js":5,"./events.js":14}],5:[function(e,t,n){"use strict";function r(e){var t,n;for(n=e.length,t=0;t<n;++t)this[e[t]]=[];this.subscriptions={},this.bufferedEvents=[]}function i(e){var t;return t=typeof e,"function"===t||"object"===t&&null!==e&&"function"==typeof e.handleEvent}function o(e,t,n){try{"function"==typeof e?e.call(t.currentTarget,t):e.handleEvent(t)}catch(e){throw n&&n.warning("Exception in "+t.type+" event handler: "+e.message),e}}var s,a=e("./Log.js").logger;t.exports=r,s=r.prototype,s.add=function(e,t){var n,r,o,s;if(i(t)&&(r=this[e])){for(n=!0,s=r.length,o=0;o<s;++o)if(r[o]===t){n=!1;break}n&&r.push(t)}},s.remove=function(e,t){var n,r,o;if(i(t)&&(n=this[e]))for(o=n.length,r=0;r<o;++r)if(n[r]===t){1===o?this[e]=[]:n.splice(r,1);break}},s.dispatch=function(e){var t,n,r,i,s;if(this.suspend)this.bufferedEvents.push(e);else{if(r=e.type,t=this[r])for(t=t.slice(),s=t.length,i=0;i<s;++i)o(t[i],e,a);if(n=this["on"+r])try{n.call(e.currentTarget,e)}catch(e){throw a.warning("Exception in on"+r+" callback: "+e.message),e}}},s.clearEvents=function(){this.bufferedEvents=[]},s.releaseEvents=function(){var e,t,n;if(n=this.bufferedEvents,t=n.length,t>0)for(this.clearEvents(),e=0;e<t;++e)this.dispatch(n[e])},s.hasSubscribers=function(e){var t,n;return t=this[e],n=!!t&&(t.length>0||this["on"+e])},s.subscribed=function(e){return!!this.subscriptions[e]},s.subscribe=function(e){this.subscriptions[e]=!0},s.unsubscribe=function(e){delete this.subscriptions[e]}},{"./Log.js":9}],6:[function(e,t,n){"use strict";function r(e){this.logonManager=e,this._lfp=new s,e.addEventListener("xhrlogon",this),e.addEventListener("xhrlogoncomplete",this),e.addEventListener("xhrlogonfailed",this)}var i,o,s=e("./DefaultLogonFrameProvider.js"),a=e("./LogonManager.js"),h=e("./URL.js");t.exports=r,r.getInstance=function(){return i},r.startup=function(){return i||(i=new r(a.startup())),i},r.shutdown=function(){i&&(i.shutdown(),i=null)},o=r.prototype,Object.defineProperties(o,{logonFrameProvider:{get:function(){return this._lfp},set:function(e){e?this._lfp=e:this._lfp=new s}}}),o.shutdown=function(){var e;e=this.logonManager,e&&(e.removeEventListener("xhrlogon",this),e.removeEventListener("xhrlogoncomplete",this),e.removeEventListener("xhrlogonfailed",this))},o.getFrameLoadHandler=function(e,t,n){var r,i;return n=n||300,r=function(){i&&clearTimeout(i),i=setTimeout(function(){e.show()},n)}},o.onXHRLogon=function(e){var t,n,r;this.cancelXHRLogon(),t=new h(e.channel.url),t.setParameter("xhr-logon","iframe"),n=this.logonFrameProvider,r=n.create(),r&&(r.onload||(r.onload=this.getFrameLoadHandler(n,r.id)),r.src=t.href),this.pending=n},o.onXHRLogonComplete=function(){this.pending&&(this.pending.destroy(),this.pending=void 0)},o.cancelXHRLogon=function(){this.pending&&(a.getInstance().abortXHRLogon(),this.onXHRLogonComplete())},o.handleEvent=function(e){var t;switch(e.type){case"xhrlogon":t=e.request,t&&this.onXHRLogon(t);break;case"xhrlogoncomplete":this.onXHRLogonComplete();break;case"xhrlogonfailed":this.onXHRLogonComplete()}}},{"./DefaultLogonFrameProvider.js":4,"./LogonManager.js":10,"./URL.js":11}],7:[function(e,t,n){"use strict";function r(e){this.provider=e}function i(e,t){return setTimeout(function(){e.window||e.createWindow()},t)}var o,s=e("./events.js"),a=e("./FrameLogonManager.js"),h=e("./Log.js").logger;t.exports=r,o=r.prototype,r.frameCounter=0;var c='<div>Authentication required</div><div><a id="POPUP_LOGIN_LINK" target="_blank" href="javascript:void(0)">Proceed to sign in</a></div>';Object.defineProperty(o,"src",{get:function(){return this.url},set:function(e){this.initialize(e)}}),o.initialize=function(e){var t,n=this;this.close(),this.closed=!1,this.url=e,this.createPollingFrame(),t=i(n,500),s.addEventListener(this.frame,"load",function(){t&&clearTimeout(t),t=i(n,500)})},o.closeFrame=function(){this.frame&&(document.body.removeChild(this.frame),this.frame=void 0)},o.close=function(){try{this.closed=!0,this.pollIntervalId&&(clearInterval(this.pollIntervalId),this.pollIntervalId=void 0),this.windowIntervalId&&(clearInterval(this.windowIntervalId),this.windowIntervalId=void 0),this.closeAlertWindow(),this.closeFrame(),this.window&&(setTimeout(function(){window.focus()},100),this.window.close(),this.window=void 0)}catch(e){h.warning("Error while closing logon window: "+e.message)}},o.cancelLogon=function(){this.closed||(h.warning("XHR Logon cancelled"),this.close(),a.getInstance().cancelXHRLogon())},o.createPollingFrame=function(){function e(){"complete"===document.readyState&&document.body.appendChild(t)}var t,n;this.closed||(r.frameCounter+=1,n="xhrLogonFrame"+r.frameCounter,t=document.createElement("iframe"),t.id=n,t.style.display="none","complete"===document.readyState?document.body.appendChild(t):s.addEventListener(document,"readystatechange",e),this.frame=t,t.src=this.url)},o.onWindowOpenFailed=function(){h.warning("Failed to open logon window"),this.cancelLogon(),this.provider.dispatchWindowFailedEvent()},o.createAlertWindow=function(){var e=this;this.alertContainer&&this.closeAlertWindow(),this.alertContainer=document.createElement("div"),this.alertContainer.className="alertContainer",this.alertContainer.innerHTML=c,document.body.appendChild(this.alertContainer),setTimeout(function(){var t=document.getElementById("POPUP_LOGIN_LINK");t.onclick=function(){e.createWindow()}})},o.closeAlertWindow=function(){this.alertContainer&&(this.alertContainer.parentNode.removeChild(this.alertContainer),this.alertContainer=null)},o.createWindow=function(){var e,t=this;e=window.open(this.url),e&&!e.closed||(h.warning("Failed to open logon window, alerting user"),this.createAlertWindow()),this.window=e,s.addEventListener(e,"load",function(){h.info("Logon window opened"),t.pollIntervalId&&clearInterval(t.pollIntervalId),t.closed||(t.pollIntervalId=setInterval(function(){t.poll()},5e3),t.windowIntervalId||(t.windowIntervalId=setInterval(function(){var e=t.window;try{!e||e.closed?t.cancelLogon():"function"==typeof e.notifyParent&&t.poll()}catch(e){h.warning("Logon polling failed: "+e.message)}},300)),setTimeout(function(){t.poll()},300))}),s.addEventListener(e,"close",function(){t.cancelLogon()}),setTimeout(function(){try{t.window&&t.window.focus()}catch(e){h.warn("Failed to switch focus to logon window")}},300)},o.poll=function(){this.window&&this.window.closed?this.cancelLogon():(this.closeFrame(),this.createPollingFrame())}},{"./FrameLogonManager.js":6,"./Log.js":9,"./events.js":14}],8:[function(e,t,n){"use strict";function r(){this.p=[],this.r=[],this.f=[]}var i;t.exports=r,i=r.prototype,String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),i.add=function(e){switch(typeof e){case"string":this.p.push(e);break;case"object":if(!(e instanceof RegExp))throw new TypeError("Unsupported ignore rule type");this.r.push(e);break;case"function":this.f.push(e);break;default:throw new TypeError("Unsupported ignore rule type")}},i.ignored=function(e){var t;return t=this._prefix(e)||this._regexp(e)||this._function(e)},i.clear=function(){this.p=[],this.r=[],this.f=[]},i._prefix=function(e){var t,n,r,i;for(i=!1,t=this.p,r=t.length,n=0;n<r;++n)if(e.startsWith(t[n])){i=!0;break}return i},i._regexp=function(e){var t,n,r,i;for(i=!1,t=this.r,r=t.length,n=0;n<r;++n)if(t[n].test(e)){i=!0;break}return i},i._function=function(e){var t,n,r,i;for(i=!1,t=this.f,r=t.length,n=0;n<r;++n)try{if(t[n](e)){i=!0;break}}catch(e){}return i}},{}],9:[function(e,t,n){"use strict";function r(e){this.logger=e}function i(e,t){var n,r;for(r=t.length,n=0;n<r;++n)if("function"!=typeof e[t[n]])return!1;return!0}function o(e){return e&&"object"==typeof e&&i(e,h)}var s,a={},h=["error","warning","info","debug"];a.error=a.warning=a.info=a.debug=function(){},t.exports=r,Object.defineProperty(r,"logger",{get:function(){return s},set:function(e){e?o(e)&&(s.logger=e):s.logger=a}}),h.forEach(function(e){r.prototype[e]=function(t){try{return this.logger[e](t)}catch(e){}}}),s=new r(a)},{}],10:[function(e,t,n){"use strict";function r(e){if(s)throw new Error("XHR Logon Manager already created");d.info("Creating XHR Logon Manager"),this.queue=[],this.realms={},this.handlers=new c(a),e&&(this._filterFactory=e),this._initializeTrustedOrigins(),this._registerFilterFactory(),window.addEventListener("message",this.getEventHandler())}function i(e){return e>=200&&e<300||304===e}e("./xhr.js");var o,s,a,h=e("./events.js").createEvent,c=e("./EventHandlers.js"),u=e("./IgnoreList.js"),d=e("./Log.js").logger,l=e("./XHRLogonFilter.js"),f=XMLHttpRequest;o={AUTHENTICATED:0,UNAUTHENTICATED:1,PENDING:2},a=["xhrlogon","xhrlogoncomplete","xhrlogonfailed","xhrlogonaborted"],t.exports=r,r.startup=function(e){return s||(s=new r(e)),s},r.shutdown=function(){s&&(s.shutdown(),s=void 0)},r.getInstance=function(){return s},r.prototype.triggerLogonOnSyncRequest=!0,r.prototype.addEventListener=function(e,t){this.handlers.add(e,t)},r.prototype.removeEventListener=function(e,t){this.handlers.remove(e,t)},r.prototype.dispatchEvent=function(e){this.handlers.dispatch(e)},r.prototype.dispatchLogonEvent=function(e){var t;t=h("xhrlogon"),t.request=e,this.dispatchEvent(t)},r.prototype.dispatchLogonCompletedEvent=function(e){var t;t=h("xhrlogoncomplete"),t.xhrLogon=e,this.dispatchEvent(t)},r.prototype.dispatchLogonFailedEvent=function(e){var t;t=h("xhrlogonfailed"),t.xhrLogon=e,this.dispatchEvent(t)},r.prototype.dispatchLogonAbortedEvent=function(e){var t;t=h("xhrlogonaborted"),t.realm=e,this.dispatchEvent(t)},r.prototype.getRealmStatus=function(e){var t;return t=this.realms[e],void 0===t&&(t=o.UNAUTHENTICATED,this.realms[e]=t),t},r.prototype.isQueued=function(e){var t,n,r;if(this.pending&&this.pending.channel&&this.pending.channel.xhr===e)return!0;for(t=0,n=this.queue.length;t<n;++t)if(r=this.queue[t],r.channel&&r.channel.xhr===e)return!0;return!1},r.prototype.onXHRLogon=function(e){var t,n;return e&&e.channel?this.isQueued(e.channel.xhr)?void d.debug("Ignoring authentication request for already queued request "+e.channel.url):(d.info("Authentication requested for "+e.channel.url),void(this.handlers.hasSubscribers("xhrlogon")?(t=e.header.realm,this.pending?(d.debug("Pending authentication process, queueing request"),this.getRealmStatus(t)===o.AUTHENTICATED&&(this.realms[t]=o.UNAUTHENTICATED),this.queue.push(e)):(d.debug("Dispatching authentication request"),this.realms[t]=o.PENDING,this.pending=e,this.dispatchLogonEvent(e))):(d.info("No authentication handler registered"),n=this.queue,this.queue=[],n.push(e),this.pending&&(n.push(this.pending),this.pending=void 0),this.abort(n)))):void d.warn("Ignoring invalid XHR Logon request")},r.prototype.onXHRLogonCompleted=function(e){var t,n,r,s,a,h,c;for(t=e.realm,r=this.queue,s=[],a=[],n=i(e.status),this.realms[t]=n?o.AUTHENTICATED:o.UNAUTHENTICATED,this.pending&&(t===this.pending.header.realm?s.push(this.pending):r.push(this.pending)),this.pending=void 0,c=r.length,h=0;h<c;++h)r[h].header.realm===t?s.push(r[h]):a.push(r[h]);this.queue=a,s.length>0&&(n?(d.info("Authentication succeeded for realm "+t+", repeating requests."),this.retry(s)):(d.warning("Authentication failed for realm "+t),this.abort(s))),n?this.dispatchLogonCompletedEvent(e):this.dispatchLogonFailedEvent(e),this.queue.length>0&&this.onXHRLogon(this.queue.shift())},r.prototype.abortXHRLogon=function(e){var t,n,r,i,s;if(!e&&this.pending&&(e=this.pending.header.realm),e){for(t=this.queue,n=[],r=[],this.realms[e]=o.UNAUTHENTICATED,this.pending&&(e===this.pending.header.realm?n.push(this.pending):t.push(this.pending)),this.pending=void 0,s=t.length,i=0;i<s;++i)t[i].header.realm===e?n.push(t[i]):r.push(t[i]);this.queue=r,n.length>0&&(d.warning("Authentication aborted for realm "+e),this.abort(n))}else d.info("No pending authentication, ignoring abort");this.dispatchLogonAbortedEvent(e),this.queue.length>0&&this.onXHRLogon(this.queue.shift())},r.prototype.retry=function(e){var t,n,r,i;for(n=e.length,t=0;t<n;++t)try{r=e[t].channel,r.async&&(i=r.xhr,i.resumeEvents(),i.repeat())}catch(e){d.warning("Error while repeating request: "+e.message)}},r.prototype.abort=function(e){var t,n,r,i;for(n=e.length,t=0;t<n;++t)try{r=e[t].channel,r.async&&(i=r.xhr,i.resumeEvents(!0))}catch(e){d.warning("Error while aborting request: "+e.message)}},r.prototype.abortAll=function(){var e;e=this.queue,this.queue=[],this.pending&&(e.push(this.pending),this.pending=void 0),this.abort(e)},r.prototype.shutdown=function(){d.info("XHR Logon Manager shutdown"),window.removeEventListener("message",this.getEventHandler()),this.abortAll(),this._unregisterFilterFactory()},r.prototype.handleEvent=function(e){var t,n,r;if(n=/^\s*\{\s*"xhrLogon"/,t=e.data,n.test(t))try{this.isTrusted(e.origin)?(r=JSON.parse(t),this.onXHRLogonCompleted(r.xhrLogon)):d.warning("Received xhrlogon message from untrusted origin "+e.origin)}catch(e){d.warning("Invalid xhrLogon message: "+t)}},r.prototype._initializeTrustedOrigins=function(){var e,t,n;if(n={},e=window.location,t=e.protocol,n[t+"//"+e.host]=!0,""===e.port)switch(t){case"http":n[t+"//"+e.host+":80"]=!0;break;case"https":n[t+"//"+e.host+":443"]=!0}this._trustedOrigins=n},r.prototype.isTrusted=function(e){return!!this._trustedOrigins[e]},r.prototype.addTrustedOrigin=function(e){this._trustedOrigins[e]=!0},r.prototype.getEventHandler=function(){var e,t;return e=this._eventHandler,e||(t=this,e=function(e){t.handleEvent(e)},this._eventHandler=e),e},r.prototype._getFilterFactory=function(){var e,t;return e=this._filterFactory,e||(t=this,e=function(e){e.filters.push(new l(t,e))},this._filterFactory=e),e},r.prototype._registerFilterFactory=function(){f.channelFactory&&f.channelFactory.addFilterFactory(this._getFilterFactory())},r.prototype._unregisterFilterFactory=function(){f.channelFactory&&(f.channelFactory.removeFilterFactory(this._getFilterFactory()),delete this._filterFactory)},r.prototype.createIgnoreList=function(){this.ignore=new u}},{"./EventHandlers.js":5,"./IgnoreList.js":8,"./Log.js":9,"./XHRLogonFilter.js":12,"./events.js":14,"./xhr.js":16}],11:[function(e,t,n){"use strict";function r(e){this._parse(e)}var i,o=/([^?#]+)(\?[^#]*)?(#.*)?/;t.exports=r,i=r.prototype,i._parse=function(e){var t=o.exec(e);this.path=t[1],this.hash=t[3]||"",this.parameters=this._parseSearch(t[2])},i._parseSearch=function(e){var t,n,r;if(r={},e)for(t=/[?&]([^&=]+)=?([^&]*)/g,n=t.exec(e);n;)r[n[1]]=n[2],n=t.exec(e);return r},i.getParameter=function(e){return decodeURIComponent(this.parameters[e])},i.removeParameter=function(e){delete this.parameters[e]},i.setParameter=function(e,t){this.parameters[e]=encodeURIComponent(t)},Object.defineProperties(i,{href:{get:function(){var e;return e=this.path+this.search+this.hash}},search:{get:function(){var e,t,n,r;e="",t=this.parameters;for(n in t)t.hasOwnProperty(n)&&(r=t[n],e.length>0&&(e+="&"),e+=n,r&&(e+="=",e+=r));return e.length>0&&(e="?"+e),e}}})},{}],12:[function(e,t,n){"use strict";function r(e,t){this.manager=e,this.channel=t,this.manager.ignore&&this.manager.ignore.ignored(t.url)||t.xhr._addEventListener("readystatechange",this)}var i,o,s=2,a=e("./XHRLogonRequest.js");t.exports=r,i=r.prototype,i.sending=function(e){var t;this.manager.ignore&&this.manager.ignore.ignored(e.url)||(t=e.xhr,t.getRequestHeader("X-XHR-Logon")||t.setRequestHeader("X-XHR-Logon",'accept="iframe"'),t.getRequestHeader("X-Requested-With")||t.setRequestHeader("X-Requested-With","XMLHttpRequest"))},i.handleEvent=function(e){var t,n,r,i;if(t=this.channel,n=t.xhr,!(n.readyState<s)){if(n.readyState===s)if(void 0===o){try{i=n.status,o=!!i}catch(e){o=!1}if(!i)return}else if(!o)return;403===n.status&&(r=n.getResponseHeader("x-xhr-logon"),r&&(t.async&&n.suspendEvents(),(t.async||this.manager.triggerLogonOnSyncRequest)&&this.manager.onXHRLogon(new a(t,e,r))))}}},{"./XHRLogonRequest.js":13}],13:[function(e,t,n){"use strict";function r(e,t,n){this.channel=e,this.event=t,"string"==typeof n?this.header=r.parseHeader(n):this.header=n}t.exports=r,r.parseHeader=function(e){var t,n,r,i,o;for(t=/(?:,|^)\s*(\w+)\s*=\s*"((?:[^"\\]|\\.)*)"/g,o={},n=t.exec(e);null!==n;)r=n[1],i=n[2].replace(/\\(.)/g,"$1"),o[r]=i,n=t.exec(e);return o}},{}],14:[function(e,t,n){"use strict";function r(e,t,n){var r;return r=document.createEvent("Event"),r.initEvent(e,t,n),r}function i(e,t,n){var i,o;if(a)i=r(e,t,n);else try{(t||n)&&(o={bubbles:t,cancelable:n}),i=new Event(e,o)}catch(o){a=!0,i=r(e,t,n)}return i}function o(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)}function s(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)}var a;t.exports={createEvent:i,addEventListener:o,removeEventListener:s}},{}],15:[function(e,t,n){"use strict";e("./xhr.js"),t.exports={AuxWindowFrameProvider:e("./AuxWindowFrameProvider.js"),FrameLogonManager:e("./FrameLogonManager.js"),FrameProxy:e("./FrameProxy.js"),LogonManager:e("./LogonManager.js")}},{"./AuxWindowFrameProvider.js":1,"./FrameLogonManager.js":6,"./FrameProxy.js":7,"./LogonManager.js":10,"./xhr.js":16}],16:[function(e,t,n){"use strict";function r(){function t(){}function n(e,t){var n,r,i,o,s,a;for(r=t.length,n=0;n<r;++n)i=t[n],a=e[i],a&&(s="_"+i,o=e[s],o||(e[s]=a))}var r,i,o,s,a=e("./Log.js"),h=e("./ChannelFactory.js"),c=e("./EventHandlers.js"),u=0,d=a.logger;r=["loadstart","progress","abort","error","load","timeout","loadend"],i=r.concat("readystatechange"),o=XMLHttpRequest,XMLHttpRequest._SAP_ENHANCED=!0,s=o.prototype,XMLHttpRequest.channelFactory=new h,n(s,["abort","open","setRequestHeader","send","addEventListener","removeEventListener"]),s._saveOnEvent=function(e){var n,r,i,o;n="on"+e,i=this[n],r=this._getHandlers(),o=r[n]?i!==t:!!i,o&&(r[n]=i,this[n]=t)},s._getHandlers=function(){var e;return e=this._handlers,e||(e=new c(i),this._handlers=e),e},s.handleEvent=function(e){"readystatechange"===e.type&&this.readyState>2&&this._checkEventSubscriptions(),this._getHandlers().dispatch(e)},s.suspendEvents=function(){this._getHandlers().suspend=!0},s.resumeEvents=function(e){var t;t=this._getHandlers(),t.suspend=!1,e&&t.releaseEvents()},s.getEventHandler=function(){var e,t;return t=this._fnHandler,t||(e=this,t=function(t){e.handleEvent(t)},this._fnHandler=t),t},s._checkEventSubscription=function(e,t){t=t||this._getHandlers(),this._saveOnEvent(e),t.hasSubscribers(e)?t.subscribed(e)||(this._addEventListener(e,this.getEventHandler()),t.subscribe(e)):t.subscribed(e)&&(this._removeEventListener(e,this.getEventHandler()),t.unsubscribe(e))},s._checkEventSubscriptions=function(){var e,t,n;for(e=this._getHandlers(),n=i.length,t=0;t<n;++t)this._checkEventSubscription(i[t],e)},s.addEventListener=function(e,t){this._getHandlers().add(e,t),this._checkEventSubscription(e)},s.removeEventListener=function(e,t){this._getHandlers().remove(e,t),this._checkEventSubscription(e)},s.abort=function(){var e;try{e=this._channel,e?(d.debug("Aborting request "+e.method+" "+e.url),e.aborting(),this._abort(),e.aborted()):(d.debug("Aborting request"),this._abort()),this._getHandlers().clearEvents()}catch(t){if(d.warning("Failed to abort request: "+t.message),!e)throw t;e.catch(t)}},s.open=function(e,t,n,r,i){var s,a,h,c;this._id=++u,d.debug("Opening request #"+this._id+" "+e+" "+t),a=arguments.length,a<=2&&(n=!0),h=e,c=t,this._getHandlers().clearEvents(),s=o.channelFactory.create(this,e,t,n,r,i),this._channel=s,this._checkEventSubscription("readystatechange");try{this._clearParams(),s.opening(),e=s.method,t=s.url,c===t&&h===e||d.debug("Rewriting request #"+this._id+" to "+e+" "+t),a<=2?this._open(e,t):this._open(e,t,n,r,i),s.opened(),this._addEventListener("readystatechange",this.getEventHandler())}catch(n){d.warning("Failed to open request #"+this._id+" "+e+" "+t+": "+n.message),s.catch(n)}},s.setRequestHeader=function(e,t){var n,r;this._setRequestHeader(e,t),r=e.toLowerCase(),n=this.headers,n[r]?n[r]+=", "+t:n[r]=t},s.setRequestHeaders=function(e){var t,n,r,i;if("object"==typeof e)for(n=Object.getOwnPropertyNames(e),i=n.length,r=0;r<i;++r)t=n[r],this.setRequestHeader(t,e[t])},s.send=function(e){var t,n,r;this._checkEventSubscriptions();try{t=this._channel,t&&(n=t.method,r=t.url,d.debug("Sending request #"+this._id+" "+n+" "+r),t.sending()),this._saveParams(e),this._send(e),t&&t.sent()}catch(e){if(n?d.warning("Failed to send request #"+this._id+" "+n+" "+r+": "+e.message):d.warning("Failed to send request #"+this._id+": "+e.message),!t)throw e;t.catch(e)}},s.getRequestHeader=function(e){return this.headers[e.toLowerCase()]},s.deleteRepeatHeader=function(e){delete this.headers[e.toLowerCase()]},s.setRepeatHeader=function(e,t){this.headers[e.toLowerCase()]=t},s.reopen=function(){var e,t,n=this._channel;if(!n)throw new TypeError("Cannot reopen request");e=n.method,t=n.url,d.debug("Reopening request #"+this._id+" "+e+" "+t),this._checkEventSubscription("readystatechange");try{n.reopening(),n.opening(),this._open(e,t,n.async,n.username,n.password),n.opened(),this._restoreParams()}catch(r){d.warning("Failed to reopen request #"+this._id+" "+e+" "+t+": "+r.message),n.catch(r)}},s.repeat=function(){var e=this._channel;if(!e)throw new TypeError("Cannot repeat request");this.reopen(),this.send(this._data)},s.toString=function(){var e=this._channel,t="[object XMLHttpRequest]";return e&&(t+="#"+this._id+" "+e.method+" "+e.url),t},Object.defineProperties(s,{channel:{get:function(){return this._channel}},headers:{get:function(){var e;return e=this._headers,e||(e={},this._headers=e),e}},id:{get:function(){return this._id}}}),s._clearParams=function(){delete this._headers,delete this._withCredentials,delete this._timeout,delete this._data},s._restoreParams=function(){var e,t;this._headers&&(t=this._headers,this._headers={},this.setRequestHeaders(t)),this._withCredentials&&(this.withCredentials=!0),e=this._timeout,e&&(this.timeout=e)},s._saveParams=function(e){var t;void 0!==e&&null!==e&&(this._data=e),this.withCredentials&&(this._withCredentials=!0),t=this.timeout,t&&(this._timeout=t)},Object.defineProperties(XMLHttpRequest,{logger:{get:function(){return a.logger},set:function(e){a.logger=e}}})}XMLHttpRequest._SAP_ENHANCED||r(),t.exports=XMLHttpRequest},{"./ChannelFactory.js":3,"./EventHandlers.js":5,"./Log.js":9}]},{},[15])(15)});